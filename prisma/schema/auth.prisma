model User {
    id        String   @id @default(uuid())
    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    email         String  @unique
    emailVerified Boolean @default(false)
    password      String

    profile       Person?        @relation("user_person")
    verifications Verification[] @relation("user_verification")
    refreshTokens RefreshToken[] @relation("user_refresh_token")

    @@map("user")
}

model Verification {
    createdAt DateTime @default(now())
    updatedAt DateTime @default(now()) @updatedAt

    variant   String
    value     String
    expiresAt DateTime

    userId String
    user   User   @relation("user_verification", fields: [userId], references: [id], onDelete: Cascade)

    @@id([userId, value])
    @@map("verification")
}

model RefreshToken {
    id        String   @id @default(uuid())
    userId    String
    user      User     @relation("user_refresh_token", references: [id], fields: [userId], onDelete: Cascade)
    isValid   Boolean  @default(true)
    expiresAt DateTime

    @@index([userId])
    @@index([expiresAt])
    @@map("refresh_token")
}
